# Chapter03: Data Link Layer

> 30%

## Key Points

- 数据帧的概念和可靠传输
- 奇偶校验和**循环冗余校验**
  - 计算
- 链路层协议（停等式ARQ、**回退N帧**、选择重传、**滑动窗口**、HDLC、PPP）
- MAC地址
  - 基本概念和用途
- 局域网的类别、**特点**和通信方式
- **CSMA/CD**算法的原理和应用
- **交换机**和网桥的工作原理

## Basics

> page 70

- 链路：一个结点到相邻结点的一段物理线路（有线or无线）
- 数据链路：除物理线路外加之必要的通信协议来控制数据的传输
- 帧：数据链路层将网络层交下来的数据（IP数据报，又数据报、分组、包）构成帧发送到链路上

> page 72

- 封装成帧：在一段数据（IP数据报）的前后分别添加首部和尾部（识别开始和结束）
- 最大传送单元MTU：数据部分长度上限
- 帧定界：SOH(Start Of Header) & EOT (End Of Transmission)
- 透明传输：加入转义字符ESC进行字节填充解决传输的数据恰为SOH or EOT的问题
- 差错检测：循环冗余检验CRC

## 差错检测

> page 74

- 奇偶校验：末尾添一位，使1的个数为偶数
- CRC校验：注意要在末尾补0（比除数少一位）

## 链路层协议

### 滑动窗口

- 停等式ARQ、**回退N帧**、选择重传

[Reference: 回退N帧协议与选择重传协议](https://www.cnblogs.com/yellowzunzhi/articles/10620377.html)

### HDLC

> page 76

高级数据链路控制HDLC(High-level Data Link Control)

现在已很少使用。

### 点对点协议PPP

> page 77

Point-to-Point Protocol

互联网用户通常都要连接到某个ISP才能接入到互联网。PPP协议就是**用户计算机和ISP进行通信**时所使用的数据链路层协议。

- 简单
  - 接受方每收到一个帧，就进行CRC检验。如果CRC检验正确，就收下这个帧；反之，就丢弃，其他什么也不做。
- 封装成帧
  - 帧定界符（标志帧的开始和结束的字符）
- 透明性
- 多种网络层协议
  - 能够在同一条物理链路上同时支持多种网络层协议（如IP和IPX等）的运行
- 多种类型链路
  - 串行/并行；同步/异步；低速/高速；电/光；交换（动态）/非交换（静态）
- 差错检测
- 检测连接状态
- 最大传送单元
  - MTU（数据链路层的帧可以载荷的数据部分的最大长度，而不是帧的总长度）
- 网络层地址协商
  - 提供机制使通信的两个网络层的实体能够通过协商知道或能够配置彼此的网络层地址。
- 数据压缩协商
  - 提供方法来协商使用数据压缩算法

> page 79

帧格式

- 首末为定界符

字节填充

- 转义符
- 零比特填充

## CSMA/CD算法

> !!! page 85

载波监听多点接入/碰撞检测

截断二进制指数退避

## 局域网

> page 82

类别、特点、通信方式

按网络拓扑进行分类：

- 星形网
- 环形网
- 总线网

局域网工作的层次跨越了数据链路层和物理层。

如何让众多用户能够合理而方便地共享通信媒介资源？

- 静态划分信道
- 动态媒体接入控制
  - 随机接入（必须有解决碰撞的网络协议）
  - 受控接入（探询/轮询）

以太网是在局域网中属于随机接入的那一种。

### 适配器

> page 84

进行数据串行传输和并行传输的转换。

由于数据率并不相同，因此在适配器中必须装有对数据进行缓存的存储芯片。

## MAC地址

> page 93

[Reference: MAC帧与PPP帧的区别](https://blog.csdn.net/u012316120/article/details/52432694)

（在局域网中）

## 交换机和网桥

### 网桥

> page 99

最初人们使用的是网桥。网桥对收到的帧根据其MAC帧的目的地址进行转发和过滤。当网桥收到一个帧时，并不是向所有的接口转发此帧，而是根据此帧的目的MAC地址，查找网桥中的地址表，再确定将帧转发到哪一个接口，或是丢弃。

### 交换机

> page 99

以太网交换机本质上是多接口的网桥。

以太网交换机的每个接口都直接与一个单台主机或另一个以太网交换机项链，且全双工方式，具有并行性。

相互通信的主机都是独占传输媒体，无碰撞地传输数据。

交换表（地址表）通过自学习算法（page 100）逐渐建立。
