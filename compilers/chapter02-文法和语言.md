# Chapter02: 文法和语言

## 预备知识

### 字母表和符号串

- 字母表：符号的非空有限集 例：$\Sigma={a，b，c}$
- 符号：字母表中的元素 例：a，b，c
- 符号串：符号的有穷序列 例：a, aa, ac, abc，...
- 空符号串：无任何符号的符号串(ε)

符号串的形式定义：

有字母表$\Sigma$定义：

1. ε是$\Sigma$上的符号串；
2. 若x是$\Sigma$上的符号串，且$a \in \Sigma$则ax或xa是$\Sigma$上的符号串；
3. y是$\Sigma$上的符号串，iff y可由1.和2.产生。

符号串集合：由符号串构成的集合。

### 符号串和符号串集合的运算

1. 符号串相等：若x、y是集合上的两个符号串，则x＝y iff（当且仅当）组成x的每一个符号和组成y的每一个符号依次相等。
2. 符号串的长度：x为符号串，其长度|x|等于组成该符号串的符号个数。例：x＝STV ， |x|=3。
3. 符号串的联接：若x、y是定义在Σ上的符号串，且x＝XY，y＝YX，则 x 和 y 的联接 xy＝XYYX也是Σ上的符号串。
4. 符号串集合的乘积运算：令A、B为符号串集合，定义AB＝{ xy |x∈A, y∈B}
5. 符号串集合的幂运算
6. 符号串集合的闭包运算（正闭包&闭包）

## 文法的非形式讨论

- 什么是文法：文法是对语言结构的定义与描述。即从形式上用于描述和规定语言结构的称为“文法”（或称为“语法”）。
- 语法规则：我们通过建立一组规则，来描述句子的语法结构。规定用“::=”表示“由……组成”。
- 由规则推导句子：有了一组规则之后，可以按照一定的方式用它们去推导或产生句子。
  - 推导方法：从一个要识别的符号开始推导，即用相应规则的右部来替代规则的左部，每次仅用一条规则去进行推导。

说明：

- 有若干语法成分同时存在时，我们总是从最左的语法成分进行推导，这称之为最左推导。类似地还有最右推导（一般推导）。
- 除了最左和最右推导，还可能存在其它形式的推导。
- 从一组规则可推出不同的句子，如以上规则还可推出“大象吃象”、“大花生吃象”、“大花生吃花生”等句子，它们在语法上都正确，但在语义上都不正确。

- 语法树：我们用语法树来描述一个句子的语法结构。

## 文法和语言的形式定义

### 文法的定义

文法G=(Vn,Vt,P,Z)

- Vn：非终结符号集
- Vt：终结符号集
- P：产生式或规则的集合
- Z：开始符号（识别符号） Z∈Vn

### 推导的形式定义

- 规范推导=最右推导
- 最右推导：若符号串中有两个以上的非终结符时，先推右边的。
- 最左推导：若符号串中有两个以上的非终结符时，先推左边的。

### 语言的形式定义

语言：文法G[Z]所产生的所有句子的集合。

### 递归文法

- 递归规则：规则右部有与左部相同的符号
  - 对于 U::= xUy：若x=ε,即U::= Uy，左递归；若y=ε,即U::= xU，右递归。
- 递归文法
  - ...U...：递归文法
  - U...：左递归文法
  - ...U：右递归文法
- 左递归文法的缺点：不能用自顶向下的方法来进行语法分析
- 递归文法的优点：可用有穷条规则，定义无穷语言

### 短语，直接短语，句柄，素短语，最左素短语

[Reference](https://www.cnblogs.com/xpwi/p/11066989.html)

## 语法树与二义性文法

### 推导与语法树

- 语法树：句子结构的图示表示法，它是一种有向图，由结点和有向边组成。
- 句型的推导及语法树的生成（自顶向下）
- 子树：语法树中的某个结点（子树的根）连同它向下派生的部分所组成。
- 树与推导

通过规范推导或规范规约所得到的句型称为规范句型。

### 文法的二义性

- 若对于一个文法的某一句子存在两棵不同的语法树，则该文法是二义性文法，否则是无二义性文法。
- 若一个文法的某句子存在两个不同的规范推导，则该文法是二义性的，否则是无二义性的。
- 若一个文法的某规范句型的句柄不唯一，则该文法是二义性的，否则是无二义性的。

文法的二义性是不可判定的

## 句子的分析

这是词法分析和语法分析所要做的工作，将在第三、四章中详细介绍。

## 有关文法的实用限制

- 若文法中有如U::=U的规则，则这就是有害规则，它会引起二义性。
- 多余规则：
  - 在推导文法的所有句子中，始终用不到的规则。即该规则的左部非终结符不出现在任何句型中。
    在推导句子的过程中，一旦使用了该规则，将推不出任何终结符号串。即该规则中含有推不出任何终结符号串的非终结符。

若某文法中无有害规则或多余规则，则称该文法是压缩过的。

## 文法的其它表示法

- 扩充的BNF表示(Backus Normal Form)
  - BNF的元符号： <, >, ::=, |
  - 扩充的BNF的元符号： <, >, ::=, |, {, }, [, ], (, )
- 语法图

## 文法和语言分类

- 形式语言：用文法和自动机所描述的没有语义的语言。
- 文法和语言分类：0型、1型、2型、3型。这几类文法的差别在于对产生式施加不同的限制。
